---
import AppShell from "../../layouts/AppShell.astro";
import SEO from "../../components/SEO.astro";
import { getCollection } from "astro:content";
import dayjs from "dayjs";

const projects = (await getCollection("projects")).sort(
  (a, b) => b.data.date.getTime() - a.data.date.getTime()
);
---

<AppShell>
  <SEO
    slot="head"
    title="Projects · Ashton Hawkins"
    description="Selected work, prototypes, and experiments led by Ashton Hawkins."
  />
  <section class="space-y-10">
    <header class="max-w-prose space-y-4">
      <h1 class="text-4xl font-semibold text-text-primary">Projects</h1>
      <p class="text-lg text-text-secondary">
        A curated mix of client collaborations, studio experiments, and technical explorations. Each
        project blends systems thinking with craft, always focused on impact.
      </p>
    </header>
    <div class="grid gap-6 md:grid-cols-2">
      {projects.length ? (
        projects.map((entry) => (
          <article class="flex h-full flex-col gap-6 rounded-3xl border border-border/60 bg-surface/80 p-6 shadow-soft transition hover:-translate-y-1 hover:border-accent">
            <div class="flex items-start justify-between">
              <span class="flex h-12 w-12 items-center justify-center rounded-2xl bg-border/40 text-2xl">
                {entry.data.coverEmoji}
              </span>
              <span class="text-xs uppercase tracking-[0.3em] text-text-muted">
                {dayjs(entry.data.date).format("MMM YYYY")}
              </span>
            </div>
            <div class="space-y-3">
              <h2 class="text-2xl font-semibold text-text-primary">{entry.data.title}</h2>
              <p class="text-sm text-text-secondary">{entry.data.summary}</p>
              <div class="rounded-2xl bg-background/60 px-4 py-3 text-xs text-text-secondary">
                <span class="font-semibold text-text-primary">Role:</span> {entry.data.role}
              </div>
            </div>
            {entry.data.impact.length ? (
              <ul class="space-y-2 text-sm text-text-secondary">
                {entry.data.impact.map((item) => (
                  <li class="flex items-start gap-2">
                    <span class="mt-[6px] inline-block h-1.5 w-1.5 rounded-full bg-accent"></span>
                    <span>{item}</span>
                  </li>
                ))}
              </ul>
            ) : null}
            {entry.data.stack.length ? (
              <div class="flex flex-wrap gap-2 text-xs text-text-muted">
                {entry.data.stack.map((tech) => (
                  <span class="rounded-full bg-border/40 px-3 py-1 font-medium">{tech}</span>
                ))}
              </div>
            ) : null}
            <div class="mt-auto flex items-center justify-between">
              {entry.data.links.length ? (
                <div class="flex flex-wrap gap-2 text-xs text-text-muted">
                  {entry.data.links.map((link) => (
                    <a
                      href={link.url}
                      target="_blank"
                      rel="noreferrer"
                      class="rounded-full bg-background/70 px-3 py-1 font-medium text-text-secondary transition hover:text-accent"
                    >
                      {link.label} ↗
                    </a>
                  ))}
                </div>
              ) : (
                <span class="text-xs text-text-muted">Documentation coming soon.</span>
              )}
              <a
                href={`/projects/${entry.slug}`}
                class="inline-flex items-center gap-2 rounded-full bg-accent px-4 py-2 text-sm font-semibold text-text-inverted transition hover:bg-accent-strong"
                data-astro-transition="animate"
              >
                View project
              </a>
            </div>
          </article>
        ))
      ) : (
        <p class="text-sm text-text-muted">New projects coming soon.</p>
      )}
    </div>
  </section>
</AppShell>
