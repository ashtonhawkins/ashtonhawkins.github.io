---
import AppShell from "../layouts/AppShell.astro";
import SEO from "../components/SEO.astro";
import HeroCard from "../components/HeroCard";
import NowChips from "../components/NowChips";
import ArtifactsTabs from "../components/ArtifactsTabs";
import ShelfCarousel from "../components/ShelfCarousel";
import SoundBadge from "../components/SoundBadge";
import TravelTrail from "../components/TravelTrail";
import PrincipleCards from "../components/PrincipleCards";
import ProofTicker from "../components/ProofTicker";
import Photostrip from "../components/Photostrip";
import { getListening, getReading, getTravel } from "../lib/data";

const reading = await getReading();
const listening = await getListening();
const travel = await getTravel();

const description = "A living about page for Ashton Hawkins—clarity, experiments, and long walks woven through work and life.";

const nowItems = [
  { label: "Small test systems", href: "/now" },
  { label: "Reading stack", href: "/now" },
  { label: "Road miles", href: "/now" }
];

const principleItems = [
  {
    front: "Start small; evaluate honestly; repeat.",
    back: "Ship the lightest test, read the data, then iterate while the context is fresh."
  },
  {
    front: "Make the next step unmistakable.",
    back: "Every flow ends with a clear action, guidance text, and visible safety nets."
  },
  {
    front: "Name assumptions, then test them.",
    back: "Every experiment brief lists the guesses in plain English before it ships."
  },
  {
    front: "Prefer evidence over instincts (but keep instincts nearby).",
    back: "Gut feelings draft the hypothesis; metrics decide whether it sticks."
  },
  {
    front: "Ship for today, design for next month.",
    back: "Launch what unblocks users now while the architecture leaves room to grow."
  },
  {
    front: "Leave things clearer than you found them.",
    back: "Wrap every project with accessible docs, insights, and the numbers to prove it."
  }
];

const proofStats = [
  { label: "Experiments shipped this year", value: 37 },
  { label: "Miles walked this month", value: 112 },
  { label: "Pages annotated this week", value: 48 }
];

const principleSeed = Math.random();
const shelfItems = reading.map((item) => ({ title: item.title, note: item.note }));
const heroPlaces = travel.map((stop) => stop.city);
const currentTrack = listening[0]
  ? { title: listening[0].track, artist: listening[0].artist }
  : undefined;
const photostripTiles = [
  {
    label: "Harbor Dawn",
    description: "Soft blues and ferry wake lines",
    colors: ["rgba(68, 132, 255, 0.85)", "rgba(29, 53, 125, 0.7)", "rgba(151, 210, 255, 0.5)"]
  },
  {
    label: "Notebook Stack",
    description: "Warm paper with ink shadows",
    colors: ["rgba(255, 196, 120, 0.8)", "rgba(158, 88, 40, 0.75)", "rgba(255, 228, 173, 0.6)"]
  },
  {
    label: "Harbor Dusk",
    description: "Green glass water meeting twilight",
    colors: ["rgba(68, 190, 165, 0.8)", "rgba(24, 82, 72, 0.7)", "rgba(182, 226, 199, 0.5)"]
  }
];

const siteOrigin = Astro.site?.origin ?? Astro.url?.origin ?? "";
const canonicalUrl = Astro.site ? new URL(Astro.url.pathname, Astro.site).toString() : Astro.url?.href ?? "";
const structuredData = [
  {
    "@context": "https://schema.org",
    "@type": "Person",
    name: "Ashton Hawkins",
    url: siteOrigin || undefined,
    jobTitle: "Product and experimentation lead",
    description,
    email: "mailto:hello@ashtonhawkins.com"
  },
  {
    "@context": "https://schema.org",
    "@type": "WebPage",
    name: "About Ashton Hawkins",
    url: canonicalUrl || undefined,
    description
  }
];
---

<AppShell>
  <SEO slot="head" title="About Ashton Hawkins · Experiments in clarity" description={description} />
  <script slot="head" type="application/ld+json" is:inline>
    {JSON.stringify(structuredData, (_key, value) => (value === undefined ? undefined : value))}
  </script>

  <section class="grid gap-8 lg:grid-cols-[minmax(0,1fr)_minmax(240px,1fr)] lg:items-start">
    <div class="space-y-6">
      <HeroCard client:load headline="I’m Ashton—chasing clarity, long walks, and well-designed experiments." subhead="Current orbit: experiment design, kinder product flows, and a little too much airport coffee." places={heroPlaces} />
    </div>
    <div class="space-y-4">
      <ProofTicker client:idle stats={proofStats} />
      <SoundBadge client:idle track={currentTrack} />
    </div>
  </section>

  <section class="grid gap-6 lg:grid-cols-[minmax(0,2fr)_minmax(0,1fr)] lg:items-center">
    <div class="space-y-4">
      <h2 class="text-2xl font-semibold text-text-primary">A Short Story</h2>
      <div class="space-y-4 text-lg leading-relaxed text-text-secondary">
        <p>I like things that make sense. The kind of sense you feel when a page reads cleanly, a choice is obvious, or a system just…helps. I grew up pulling apart flows to see where people trip, then putting them back together so more people get where they’re going. These days I spend most of my energy designing small, measurable changes that add up—on the web, in teams, and in my own habits.</p>
        <p>Outside of screens, I walk a lot. I keep a running shelf of books with dog-eared pages, and I track what I notice so I can improve it next time. Travel sneaks into everything: new places reset my sense of “normal,” which is useful when your job is to notice the weird parts other people gloss over.</p>
        <p>If we work together, you’ll probably hear me say “let’s try the smallest useful version” and “show me the data.” It’s not about being precious; it’s about building momentum—and keeping things honest.</p>
      </div>
    </div>
    <div class="rounded-3xl border border-border/60 bg-surface/70 p-6 shadow-soft">
      <h3 class="text-sm font-semibold uppercase tracking-[0.2em] text-text-secondary">Now</h3>
      <p class="mt-3 text-base text-text-secondary">Three threads currently getting the most attention. The full log lives on the /now page.</p>
      <div class="mt-5">
        <NowChips client:idle items={nowItems} />
      </div>
    </div>
  </section>

  <section class="space-y-8">
    <div class="space-y-3">
      <h2 class="text-2xl font-semibold text-text-primary">Artifacts from life</h2>
      <p class="max-w-prose text-base text-text-secondary">Reading notes, tracks on repeat, and recent stops refresh here without a rebuild—swappable with live feeds when the adapters arrive.</p>
    </div>
    <div class="grid gap-6 lg:grid-cols-[minmax(0,2fr)_minmax(0,1fr)]">
      <ArtifactsTabs client:load reading={reading} listening={listening} travel={travel} />
      <div class="space-y-4">
        <ShelfCarousel client:idle items={shelfItems} />
        <TravelTrail client:idle stops={travel} />
      </div>
    </div>
  </section>

  <section class="space-y-8">
    <PrincipleCards client:load items={principleItems} seed={principleSeed} />
  </section>

  <section class="space-y-6">
    <div class="rounded-3xl border border-border/60 bg-surface/80 p-8 shadow-soft">
      <h2 class="text-2xl font-semibold text-text-primary">Work, briefly</h2>
      <p class="mt-4 text-lg text-text-secondary">I help teams reduce friction in key journeys and run experiments that compound. My focus is clarity in trial, checkout, and onboarding flows—nudging more people to success without shouting. Recent work includes lifts in attach and revenue per visitor through simpler choices, sharper copy, and better timing.</p>
    </div>
    <Photostrip client:idle tiles={photostripTiles} />
  </section>

  <section class="space-y-4">
    <h2 class="text-xl font-semibold text-text-primary">Colophon & Contact</h2>
    <p class="text-base text-text-secondary">Built with Astro and Tailwind. Motion is gentle and optional. Email me—would love to hear what you’re building.</p>
    <a
      href="mailto:hello@ashtonhawkins.com"
      class="inline-flex items-center justify-start rounded-full border border-border/60 bg-surface px-5 py-2 text-sm font-semibold text-text-primary transition hover:border-accent/60 focus-visible:outline focus-visible:outline-2 focus-visible:outline-offset-2 focus-visible:outline-accent"
    >
      hello@ashtonhawkins.com
    </a>
  </section>
</AppShell>
