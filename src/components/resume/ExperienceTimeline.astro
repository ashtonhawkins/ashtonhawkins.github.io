---
import type resumeData from "../../data/resume.json";
import ExperienceCard from "./ExperienceCard.astro";
import ExperienceTimelineClient from "./ExperienceTimelineClient";
const { experience } = Astro.props as {
  experience: (typeof resumeData.experience[number] & {
    durationApprox: string;
    rangeExact: string;
    tags: string[];
  })[];
};
const buttonId = "expand-experience";
const containerId = "experience-stack";
---
<section class="rounded-3xl border border-[color-mix(in_srgb,var(--ink)_10%,transparent)] bg-[var(--surface-alt)] p-8 shadow-lg shadow-black/10">
  <div class="flex flex-col gap-6">
    <div class="flex items-center justify-between">
      <h2 class="text-xl font-semibold text-[var(--ink)]">Experience Timeline</h2>
      <button id={buttonId} type="button" class="rounded-full border border-[color-mix(in_srgb,var(--ink)_12%,transparent)] px-3 py-1.5 text-xs font-medium text-[var(--ink)] hover:border-[color-mix(in_srgb,var(--accent)_40%,transparent)]">Expand all</button>
    </div>
    <div id={containerId} class="flex flex-col gap-4">
      {experience.map((exp) => (
        <ExperienceCard experience={exp} key={exp.id} />
      ))}
    </div>
  </div>
  <ExperienceTimelineClient client:load buttonId={buttonId} containerId={containerId} />
</section>
