---
import type resumeData from "../../data/resume.json";
const { caseStudies } = Astro.props as {
  caseStudies: (typeof resumeData.caseStudies[number] & { tags: string[] })[];
};
---
<section class="rounded-3xl border border-[color-mix(in_srgb,var(--ink)_10%,transparent)] bg-[var(--surface-alt)] p-8 shadow-lg shadow-black/10">
  <div class="flex flex-col gap-6">
    <div class="flex items-center justify-between">
      <h2 class="text-xl font-semibold text-[var(--ink)]">Portfolio Case Studies</h2>
      <span class="text-xs text-[var(--ink-2)]">Hover for detail</span>
    </div>
    <div class="grid gap-6 md:grid-cols-2 xl:grid-cols-3">
      {caseStudies.map((study) => (
        <article
          id={study.id}
          data-tags={study.tags.join(",")}
          class="group card flex flex-col overflow-hidden rounded-2xl border border-[color-mix(in_srgb,var(--ink)_10%,transparent)] bg-[var(--surface)] shadow-inner shadow-black/5 transition-transform duration-300 hover:-translate-y-1"
        >
          <div class="relative aspect-[4/3] overflow-hidden">
            <img src={study.thumb} alt="" loading="lazy" class="public-only h-full w-full object-cover opacity-90 transition duration-300 group-hover:opacity-100" />
            <div class="confidential-only flex h-full w-full items-center justify-center bg-[color-mix(in_srgb,var(--ink)_8%,transparent)] text-sm uppercase tracking-[0.3em] text-[var(--ink-2)]">
              Placeholder
            </div>
          </div>
          <div class="flex flex-1 flex-col gap-3 p-5">
            <div class="flex flex-wrap gap-2 text-[10px] uppercase tracking-wide text-[var(--ink-2)]">
              {study.tags.map((tag) => (
                <span class="rounded-full bg-[color-mix(in_srgb,var(--ink)_6%,transparent)] px-2 py-1" key={tag}>{tag}</span>
              ))}
            </div>
            <h3 class="text-lg font-semibold text-[var(--ink)]">
              <span class="confidential-only">{study.sensitive ? "Confidential initiative" : study.title}</span>
              <span class="public-only">{study.title}</span>
            </h3>
            <p class="text-sm text-[var(--ink-2)]">{study.problem}</p>
            <p class="text-sm font-medium text-[var(--ink)]">{study.outcome}</p>
            <div class="mt-auto flex flex-wrap gap-2 text-sm">
              {study.receipts.map((receipt) => (
                <a
                  class={`rounded-full border border-[color-mix(in_srgb,var(--ink)_12%,transparent)] px-3 py-1.5 text-xs font-medium text-[var(--ink)] transition hover:border-[color-mix(in_srgb,var(--accent)_40%,transparent)] ${receipt.sensitive ? "sensitive-link" : ""}`}
                  data-view-transition-name={`case-${study.id}-${receipt.label.replace(/\s+/g, "-").toLowerCase()}`}
                  href={receipt.url}
                  key={receipt.label}
                >
                  {receipt.label}
                </a>
              ))}
            </div>
          </div>
        </article>
      ))}
    </div>
  </div>
</section>
