---
import tags from '@data/writing-tags.json';

const visibleTags = [...tags, ...tags.slice(0, 8)];
const seededTags = visibleTags.map((tag, index) => ({
  tag,
  y: 5 + ((index * 13) % 90),
  duration: 18 + (index % 10) * 4.5,
  delay: (index * 2.7) % 30,
  size: `${10 + ((index * 3) % 13)}px`
}));
---
<div class="drift" aria-label="Writing topics">
  {seededTags.map((item) => (
    <a href={`/writing?tag=${encodeURIComponent(item.tag)}`} class="drift__tag" style={`--y:${item.y}%; --dur:${item.duration}s; --delay:${item.delay}s; --size:${item.size};`}>{item.tag}</a>
  ))}
</div>
<style>
.drift{position:relative;height:230px;overflow:hidden;border:1px solid var(--border);background:var(--surface-secondary);isolation:isolate}
.drift::before,.drift::after{content:'';position:absolute;top:0;bottom:0;width:2.5rem;z-index:2;pointer-events:none}
.drift::before{left:0;background:linear-gradient(90deg,var(--surface-secondary),transparent)}.drift::after{right:0;background:linear-gradient(-90deg,var(--surface-secondary),transparent)}
.drift__tag{position:absolute;left:-35%;top:var(--y);transform:translateY(-50%);font-family:'IBM Plex Mono',monospace;font-size:var(--size);text-decoration:none;color:var(--text-tertiary);white-space:nowrap;animation:drift-x var(--dur) linear infinite;animation-delay:calc(var(--delay) * -1s)}
.drift__tag:hover{color:var(--accent-primary)}
@keyframes drift-x{from{transform:translate(-120%,-50%)}to{transform:translate(130vw,-50%)}}
@media (prefers-reduced-motion: reduce){.drift{display:grid;grid-template-columns:repeat(3,minmax(0,1fr));gap:.5rem;height:auto;padding:1rem}.drift__tag{position:static;transform:none;animation:none}}
</style>
