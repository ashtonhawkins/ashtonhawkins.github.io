---
import tags from '@data/writing-tags.json';

const seededTags = tags.map((tag, index) => ({
  tag,
  y: 3 + ((index * 11) % 94),
  duration: 10 + (index % 9) * 5,
  delay: index * -2.1,
  size: ['10px', '12px', '14px', '18px', '20px'][index % 5]
}));
---
<div class="drift" aria-label="Writing topics">
  {seededTags.map((item) => (
    <a href={`/writing?tag=${encodeURIComponent(item.tag)}`} class="drift__tag" style={`--y:${item.y}%; --dur:${item.duration}s; --delay:${item.delay}s; --size:${item.size};`}>{item.tag}</a>
  ))}
</div>
<style>
.drift{position:relative;height:230px;overflow:hidden;border:1px solid var(--border);background:var(--surface-secondary);isolation:isolate}
.drift::before,.drift::after{content:'';position:absolute;top:0;bottom:0;width:2.5rem;z-index:2;pointer-events:none}
.drift::before{left:0;background:linear-gradient(90deg,var(--surface-secondary),transparent)}.drift::after{right:0;background:linear-gradient(-90deg,var(--surface-secondary),transparent)}
.drift__tag{position:absolute;left:100%;top:var(--y);transform:translateY(-50%);font-family:'IBM Plex Mono',monospace;font-size:var(--size);text-decoration:none;color:var(--text-tertiary);white-space:nowrap;animation:drift-x var(--dur) linear infinite;animation-delay:var(--delay)}
.drift__tag:hover{color:var(--accent-primary)}
@keyframes drift-x{from{transform:translate(0,-50%)}to{transform:translate(-140vw,-50%)}}
@media (prefers-reduced-motion: reduce){.drift{display:grid;grid-template-columns:repeat(3,minmax(0,1fr));gap:.5rem;height:auto;padding:1rem}.drift__tag{position:static;transform:none;animation:none}}
</style>
